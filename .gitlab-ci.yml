stages:
  - build
  - test
  - staging
  - deploy

default:
  image: eclipse-temurin:20

workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'

build-job:
  stage: build
  script:
    - apt-get update && apt-get install -y maven
    - mvn -version
    - mvn clean
    - mvn install
    - mvn compile
  start_in: 30 seconds
  when: delayed
  except:
    changes:
      - "*.md" #you don't want to run pipeline if it's only readme which change
  artifacts:
    paths:
      - "build/"
    expire_in: 1 day